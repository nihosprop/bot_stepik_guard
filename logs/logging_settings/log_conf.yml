version: 1
disable_existing_loggers: True

formatters:
  simple:
    format: '[{asctime}] - {message}'
    datefmt: '%Y.%m.%d %H:%M:%S'
    style: '{'

  formatter_1:
    format: '[{asctime}] #{levelname:<8} {filename:<17}:{lineno:4} - <{funcName}> - {message}'
    datefmt: '%Y.%m.%d %H:%M:%S'
    style: '{'


filters:
  error_critical_filter:
    (): logs.logging_settings.log_filters.ErrorCriticalLogFilter

  info_warning_err_filter:
    (): logs.logging_settings.log_filters.InfoWarningLogFilter

  debug_filter:
    (): logs.logging_settings.log_filters.DebugLogFilter

handlers:
  default:
    class: logging.StreamHandler
    level: ${LOG_LEVEL}
    formatter: formatter_1

  stdout:
    class: logging.StreamHandler
    formatter: formatter_1
    stream: ext://sys.stdout

  warning_file:
    class: logging.handlers.RotatingFileHandler
    filename: logs/warning.log
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: utf-8
    mode: w
    formatter: formatter_1
    filters: [info_warning_err_filter]

  critical_file:
    class: logging.handlers.RotatingFileHandler
    filename: logs/critical.log
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: utf-8
    mode: w
    formatter: formatter_1
    filters: [error_critical_filter]

loggers:

  apscheduler:
    level: ${LOG_LEVEL}
    propagate: False

  scheduler:
    level: ${LOG_LEVEL}
    handlers: [ stdout, warning_file, critical_file ]
    propagate: no

  # handlers
  handlers.owners_handlers:
    level: ${LOG_LEVEL}
    handlers: [ stdout, warning_file, critical_file ]
    propagate: no

  handlers.admin_handlers:
    level: ${LOG_LEVEL}
    handlers: [ stdout, warning_file, critical_file ]
    propagate: no

  # middlewares
  middlewares.outer:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  # config
  config_data.config:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  # filters
  filters.filters:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  # keyboards
  keyboards.utils_menu:
    level: ${LOG_LEVEL}
    handlers: [ stdout, warning_file, critical_file ]
    propagate: no

  keyboards.kb_utils:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  keyboards.keyboards:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  keyboards.set_menu:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  # states
  states.states:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  # utils
  utils.utils:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

  utils.stepik:
    level: ${LOG_LEVEL}
    handlers: [ stdout, warning_file, critical_file ]
    propagate: no

  # tasks
  tasks.tasks:
    level: ${LOG_LEVEL}
    handlers: [ stdout, warning_file, critical_file ]
    propagate: no

  __main__:
    level: ${LOG_LEVEL}
    handlers: [stdout, warning_file, critical_file]
    propagate: no

root:
  level: ${LOG_LEVEL}
  handlers: [default]